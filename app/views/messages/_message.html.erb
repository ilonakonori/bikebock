<div class="<%= local_assigns[:css_message] %> message-container " id="message-<%= message.id %>" data-sender-id="<%= message.sender_id %>">
  <div class="<%= local_assigns[:css_msg] %> " >
    <!--  <small><#%= message.created_at.strftime("%b %e at %l:%M%p") %></small><br>-->
    <% if message.attachment.present? %>
      <%= cl_image_tag message.attachment.key, height: 160, width: 160, crop: :fill, onclick: 'preview(this)' %>
    <% end %>
    <br>
    <%= message.content %>
  </div>
</div>
<!--
<%#= message.download_link %>
      <%#= link_to("Download", cl_private_download_url("my_private_image", :jpg, :attachment => true)) %>
      <%#= link_to 'download', rails_blob_path(message, disposition: 'attachment') %>

<a href="<%#= message.attachment %>" download="image" >
</a>
  cl_image_path(message.attachment)-->

<script>

  function preview(_this) {
    console.log(_this);
    const chat = document.querySelector('.chatbox');
    if(_this.classList.contains('prev')) {
      _this.classList.remove('prev');
    } else {
      _this.classList.add('prev');
    }
  }
</script>

<style>
  .prev {
    position:absolute;
    top:24%;
    left:50%;
    transform:translate(-50%, 0);
    width:100%;
    height:70%;
    box-shadow: 3px 4px 5px 0px rgba(0, 0, 0, 0.38);
  }
</style>
